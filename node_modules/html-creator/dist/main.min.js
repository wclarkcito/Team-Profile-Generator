"use strict";function _interopDefault(t){return t&&"object"==typeof t&&"default"in t?t.default:t}var path=_interopDefault(require("path")),fs=_interopDefault(require("fs")),mkdirp=_interopDefault(require("mkdirp")),lodash=_interopDefault(require("lodash"));function createCommonjsModule(t,e){return t(e={exports:{}},e.exports),e.exports}var tools=createCommonjsModule(function(t){const e=({stack:t,type:n,id:o,className:r})=>{const s=[];t&&t.constructor===Array&&(s.push(t.filter(t=>n?t.type===n:o?t.attributes&&t.attributes.id===o:r?t.attributes&&t.attributes.class===r:null)),t.forEach(t=>{if(t.content&&t.content.constructor===Array){const a=e({stack:t.content,type:n,id:o,className:r});a&&s.push(a)}}));const a=lodash.flattenDeep(s);return a.length>0?1===a.length?a[0]:a:null};t.exports={logMessage:(t,e)=>{const n={default:"[37m%s[0m",success:"[32m%s[0m",error:"[31m%s[0m"},o=n[t]?n[t]:n.default,r=`HTML-Creator >> ${e}`;return console.log(o,r),{logColor:o,logMsg:r}},writeFile:(t,e)=>new Promise((n,o)=>t?mkdirp(path.dirname(t),r=>r?o(`Something went wrong when creating the file: ${r}`):n(fs.writeFile(t,e,t=>o(`Something went wrong when writing to the file: ${t}`)))):o("A file path is required")),searchForElement:e,pushOrConcat:(t,e)=>e.constructor===Array?t.concat(e):(t.push(e),t)}}),tools_1=tools.logMessage,tools_2=tools.writeFile,tools_3=tools.searchForElement,tools_4=tools.pushOrConcat,element=createCommonjsModule(function(t){const e=t=>t&&t.constructor===Object?Object.keys(t).map(e=>` ${e.replace(/([A-Z])/g,t=>`-${t[0].toLowerCase()}`)}="${t[e]}"`).join(""):"",n=(t,e)=>t&&t.constructor===Array?t.map(t=>e(t)).join(""):t||"",o=({type:t,attributes:r,content:s})=>t?s?`<${t}${e(r)}>${n(s,o)}</${t}>`:`<${t}${e(r)} />`:s;t.exports={create:o,parseContent:n,applyAttributes:e}}),element_1=element.create,element_2=element.parseContent,element_3=element.applyAttributes;class Document{constructor(t){t?this.setContent(t):this.setContent([])}setContent(t){return t&&t.constructor===Array?(this.content=t,t):tools.logMessage("error","The content needs to be provided as an Array")}getContentInHTML(){let t="";return this.content&&this.content.constructor===Array&&this.content.forEach(e=>{t+=element.create(e)}),t}getHTML(){return`<!DOCTYPE html><html>${this.getContentInHTML()}</html>`}findElementByType(t){return tools.searchForElement({stack:this.content,type:t})}findElementById(t){return tools.searchForElement({stack:this.content,id:t})}findElementByClassName(t){return tools.searchForElement({stack:this.content,className:t})}setTitle(t){const e=this.findElementByType("title");if(e)return e.content=t,t;const n=this.findElementByType("head");return n?(n.content&&n.content.constructor===Array?n.content.push({type:"title",content:t}):n.content=[{type:"title",content:t}],t):(this.content.push({type:"head",content:[{type:"title",content:t}]}),t)}withBoilerplate(t){return this.content=[{type:"head",content:[{type:"meta",attributes:{charset:"utf-8"}},{type:"meta",attributes:{name:"viewport",content:"width=device-width, initial-scale=1, shrink-to-fit=no"}}]},{type:"body",content:t}],this}addElement(t){return this.content=tools.pushOrConcat(this.content,t),this}addElementToTarget(t,e){let n;e&&e.id?n=this.findElementById(e.id):e&&e.class?n=this.findElementByClassName(e.class):e&&e.type&&(n=this.findElementByType(e.type));const o=({targetContent:t,data:e})=>{let o=t;if(t&&t.constructor===Array)o=tools.pushOrConcat(o,e);else if(t&&t.constructor===String){const t=n.content;(o=[]).push({content:t}),o=tools.pushOrConcat(o,e)}else o=[],o=tools.pushOrConcat(o,e);return o};return n&&n.constructor===Array?n.map((e,r)=>(n[r].content=o({targetContent:e.content,data:t}),!0)):n.content=o({targetContent:n.content,data:t}),this}addElementToClass(t,e){return this.addElementToTarget(e,{class:t})}addElementToId(t,e){return this.addElementToTarget(e,{id:t})}addElementToType(t,e){return this.addElementToTarget(e,{type:t})}}var document=Document;class HtmlCreator{constructor(t){this.document=new document(t)}withBoilerplate(t){return this.document.withBoilerplate(t),this}renderHTML(t){if(t){const{excludeHTMLtag:e}=t;if(e)return this.document.getContentInHTML()}return this.document.getHTML()}renderHTMLToFile(t){return tools.writeFile(t,this.renderHTML()).then(()=>tools.logMessage("success",`HTML generated (${t})`)).catch(t=>tools.logMessage("error",t))}}var src=HtmlCreator;module.exports=src;
